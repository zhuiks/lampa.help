import{S as te,i as se,s as ae,e as v,t as F,c as w,a as P,h as H,d as _,b as $,g as k,J as h,K as G,M as N,v as ne,a2 as re,u as oe,a3 as fe,a4 as ie,L as ue,w as L,x as M,y as O,Z as ce,q as g,o as b,B as S,k as T,m as A,a5 as Q,N as me,F as pe,n as _e,p as de,G as $e,H as he,I as ge}from"../../chunks/vendor-c7eddb47.js";import{u as ve,a as J,b as we,l as le,c as Pe,p as ke,P as be}from"../../chunks/plan-select-5130ad93.js";import{s as ye}from"../../chunks/get-data-55be34fa.js";import{p as Ee,g as W,L as De}from"../../chunks/app-24b55d88.js";import"../../chunks/preload-helper-e4860ae8.js";function Ie(r){let e,l,f;return{c(){e=v("a"),l=F("#"),f=F(r[0]),this.h()},l(s){e=w(s,"A",{rel:!0,href:!0});var n=P(e);l=H(n,"#"),f=H(n,r[0]),n.forEach(_),this.h()},h(){$(e,"rel","external"),$(e,"href",r[1])},m(s,n){k(s,e,n),h(e,l),h(e,f)},p:G,i:G,o:G,d(s){s&&_(e)}}}function Te(r,e,l){let f,s,n;N(r,ve,i=>l(3,f=i)),N(r,J,i=>l(4,s=i)),N(r,we,i=>l(5,n=i)),ne(async()=>console.log("lesson link onMount",o)),re(async()=>console.log("lesson link beforeUpdate",o)),oe(async()=>console.log("lesson link afterUpdate")),fe(async()=>console.log("lesson link onDestroy"));let{relative:a=1}=e;const o=parseInt(s.num)+a,u=`/${n.urlPath}${s.section}/lesson${o}${f}`;return r.$$set=i=>{"relative"in i&&l(2,a=i.relative)},[o,u,a]}class x extends te{constructor(e){super();se(this,e,Te,Ie,ae,{relative:2})}}function ee(r){let e,l,f,s,n;return l=new x({props:{relative:-1}}),s=new x({props:{relative:1}}),{c(){e=v("nav"),L(l.$$.fragment),f=T(),L(s.$$.fragment),this.h()},l(a){e=w(a,"NAV",{class:!0});var o=P(e);M(l.$$.fragment,o),f=A(o),M(s.$$.fragment,o),o.forEach(_),this.h()},h(){$(e,"class","svelte-o0it02"),Q(e,"visible",r[1]>60)},m(a,o){k(a,e,o),O(l,e,null),h(e,f),O(s,e,null),n=!0},p(a,o){o&2&&Q(e,"visible",a[1]>60)},i(a){n||(g(l.$$.fragment,a),g(s.$$.fragment,a),n=!0)},o(a){b(l.$$.fragment,a),b(s.$$.fragment,a),n=!1},d(a){a&&_(e),S(l),S(s)}}}function Ae(r){let e,l,f,s,n,a,o,u,i,c,q,E,z,R,y,B,I,C,D,m=r[3]&&ee(r);n=new me({props:{id:"slogan"}});const V=r[4].default,d=pe(V,r,r[6],null);return c=new be({}),E=new De({}),{c(){e=v("header"),m&&m.c(),l=T(),f=v("h5"),s=v("a"),L(n.$$.fragment),a=T(),o=v("main"),d&&d.c(),u=T(),i=v("footer"),L(c.$$.fragment),q=T(),L(E.$$.fragment),z=F(`
		(c) 2021`),R=T(),y=v("div"),B=F("\u{1F6A7} Site is under construction. Please send feedback on "),I=v("a"),C=F("lampochka.help"),this.h()},l(t){e=w(t,"HEADER",{class:!0});var p=P(e);m&&m.l(p),l=A(p),f=w(p,"H5",{class:!0});var K=P(f);s=w(K,"A",{href:!0,class:!0});var X=P(s);M(n.$$.fragment,X),X.forEach(_),K.forEach(_),p.forEach(_),a=A(t),o=w(t,"MAIN",{});var Z=P(o);d&&d.l(Z),Z.forEach(_),u=A(t),i=w(t,"FOOTER",{class:!0});var U=P(i);M(c.$$.fragment,U),q=A(U),M(E.$$.fragment,U),z=H(U,`
		(c) 2021`),U.forEach(_),R=A(t),y=w(t,"DIV",{class:!0});var Y=P(y);B=H(Y,"\u{1F6A7} Site is under construction. Please send feedback on "),I=w(Y,"A",{href:!0});var j=P(I);C=H(j,"lampochka.help"),j.forEach(_),Y.forEach(_),this.h()},h(){$(s,"href",r[0]),$(s,"class","svelte-o0it02"),$(f,"class","slogan svelte-o0it02"),$(e,"class","svelte-o0it02"),$(i,"class","svelte-o0it02"),$(I,"href","mailto:lampochka.help@gmail.com"),$(y,"class","construction svelte-o0it02")},m(t,p){k(t,e,p),m&&m.m(e,null),h(e,l),h(e,f),h(f,s),O(n,s,null),k(t,a,p),k(t,o,p),d&&d.m(o,null),k(t,u,p),k(t,i,p),O(c,i,null),h(i,q),O(E,i,null),h(i,z),k(t,R,p),k(t,y,p),h(y,B),h(y,I),h(I,C),D=!0},p(t,p){t[3]?m?(m.p(t,p),p&8&&g(m,1)):(m=ee(t),m.c(),g(m,1),m.m(e,l)):m&&(_e(),b(m,1,1,()=>{m=null}),de()),(!D||p&1)&&$(s,"href",t[0]),d&&d.p&&(!D||p&64)&&$e(d,V,t,t[6],D?ge(V,t[6],p,null):he(t[6]),null)},i(t){D||(g(m),g(n.$$.fragment,t),g(d,t),g(c.$$.fragment,t),g(E.$$.fragment,t),D=!0)},o(t){b(m),b(n.$$.fragment,t),b(d,t),b(c.$$.fragment,t),b(E.$$.fragment,t),D=!1},d(t){t&&_(e),m&&m.d(),S(n),t&&_(a),t&&_(o),d&&d.d(t),t&&_(u),t&&_(i),S(c),S(E),t&&_(R),t&&_(y)}}}function Le(r){let e=!1,l=()=>{e=!1},f,s,n,a,o;return ie(r[5]),s=new ue({props:{bundles:W(r[2]),$$slots:{default:[Ae]},$$scope:{ctx:r}}}),{c(){L(s.$$.fragment)},l(u){M(s.$$.fragment,u)},m(u,i){O(s,u,i),n=!0,a||(o=ce(window,"scroll",()=>{e=!0,clearTimeout(f),f=setTimeout(l,100),r[5]()}),a=!0)},p(u,[i]){i&2&&!e&&(e=!0,clearTimeout(f),scrollTo(window.pageXOffset,u[1]),f=setTimeout(l,100));const c={};i&4&&(c.bundles=W(u[2])),i&75&&(c.$$scope={dirty:i,ctx:u}),s.$set(c)},i(u){n||(g(s.$$.fragment,u),n=!0)},o(u){b(s.$$.fragment,u),n=!1},d(u){S(s,u),a=!1,o()}}}async function Ne({url:r,params:e,fetch:l}){const f=r.searchParams.get("lang")||"en";le.set(f);const s=`/?lang=${f}`;await Ee(l);const n=e.type;Pe.set(n);const a=await ye(l,f);if(!a.ready)return{status:a.status,error:a.error};delete a.ready,ke.set(a);let o=!1;if(e.lesson){const u=/\/?(?:(?<section>[^\/]+)\/[^\/\d\s]*(?<num>\d+))|(?<special>[^\/]+)$/.exec(e.lesson);if(!u)return{status:404,error:new Error(`Could not load ${r.pathname}`)};o=u.groups}return J.set(o),{stuff:{plans:a,currentPlan:n?a[n]:!1,urlParams:s,lesson:o},props:{urlParams:s}}}function Me(r,e,l){let f,s;N(r,le,c=>l(2,f=c)),N(r,J,c=>l(3,s=c));let{$$slots:n={},$$scope:a}=e,o,{urlParams:u}=e;function i(){l(1,o=window.pageYOffset)}return r.$$set=c=>{"urlParams"in c&&l(0,u=c.urlParams),"$$scope"in c&&l(6,a=c.$$scope)},[u,o,f,s,n,i,a]}class Re extends te{constructor(e){super();se(this,e,Me,Le,ae,{urlParams:0})}}export{Re as default,Ne as load};
