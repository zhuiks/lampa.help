import{S as ne,i as re,s as oe,e as b,t as Y,c as k,a as E,h as q,d as _,b as d,a2 as V,g as v,J as h,l as x,K as ee,N as O,a3 as fe,M as ie,w as N,x as S,y as F,Y as ue,q as w,o as P,B as H,k as A,m as D,O as ce,F as me,n as _e,p as pe,G as $e,H as de,I as he}from"../../../chunks/vendor-93d9c1c6.js";import{a as X,b as ge,l as j,d as ve,c as we,p as be}from"../../../chunks/store-bebe7b2e.js";import{s as ke}from"../../../chunks/get-data-85bcf84e.js";import{p as Ee,g as te,L as Pe}from"../../../chunks/app-553cd00c.js";import{P as ye}from"../../../chunks/plan-select-5c397525.js";import"../../../chunks/preload-helper-e4860ae8.js";function se(r){let e,t,s;return{c(){e=b("a"),t=Y("#"),s=Y(r[2]),this.h()},l(l){e=k(l,"A",{rel:!0,href:!0,class:!0});var o=E(e);t=q(o,"#"),s=q(o,r[2]),o.forEach(_),this.h()},h(){d(e,"rel","external"),d(e,"href",r[3]),d(e,"class","svelte-6aa4cx"),V(e,"end",r[0]>0)},m(l,o){v(l,e,o),h(e,t),h(e,s)},p(l,o){o&1&&V(e,"end",l[0]>0)},d(l){l&&_(e)}}}function Ie(r){let e,t=r[2]>0&&r[2]<=r[1]&&se(r);return{c(){t&&t.c(),e=x()},l(s){t&&t.l(s),e=x()},m(s,l){t&&t.m(s,l),v(s,e,l)},p(s,[l]){s[2]>0&&s[2]<=s[1]?t?t.p(s,l):(t=se(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ee,o:ee,d(s){t&&t.d(s),s&&_(e)}}}function Le(r,e,t){let s,l,o,n;O(r,X,c=>t(4,s=c)),O(r,ge,c=>t(5,l=c)),O(r,j,c=>t(6,o=c)),O(r,ve,c=>t(1,n=c));let{relative:f=1}=e;const i=parseInt(s.num)+f,u=`/${o}/${l.urlPath}${s.section}/lesson${i}`;return r.$$set=c=>{"relative"in c&&t(0,f=c.relative)},[f,n,i,u]}class le extends ne{constructor(e){super();re(this,e,Le,Ie,oe,{relative:0})}}function ae(r){let e,t,s,l,o;return t=new le({props:{relative:-1}}),l=new le({props:{relative:1}}),{c(){e=b("nav"),N(t.$$.fragment),s=A(),N(l.$$.fragment),this.h()},l(n){e=k(n,"NAV",{class:!0});var f=E(e);S(t.$$.fragment,f),s=D(f),S(l.$$.fragment,f),f.forEach(_),this.h()},h(){d(e,"class","svelte-o0it02"),V(e,"visible",r[0]>60)},m(n,f){v(n,e,f),F(t,e,null),h(e,s),F(l,e,null),o=!0},p(n,f){f&1&&V(e,"visible",n[0]>60)},i(n){o||(w(t.$$.fragment,n),w(l.$$.fragment,n),o=!0)},o(n){P(t.$$.fragment,n),P(l.$$.fragment,n),o=!1},d(n){n&&_(e),H(t),H(l)}}}function Te(r){let e,t,s,l,o,n,f,i,u,c,z,B,T,C,g,y,G,I,J,L,m=r[2]&&ae(r);c=new ce({props:{id:"slogan"}});const K=r[3].default,$=me(K,r,r[5],null);return y=new ye({}),I=new Pe({}),{c(){e=b("div"),t=Y("\u{1F6A7} Site is under construction. Please send feedback on "),s=b("a"),l=Y("lampochka.help"),o=A(),n=b("header"),m&&m.c(),f=A(),i=b("h5"),u=b("a"),N(c.$$.fragment),B=A(),T=b("main"),$&&$.c(),C=A(),g=b("footer"),N(y.$$.fragment),G=A(),N(I.$$.fragment),J=Y(`
		(c) 2021`),this.h()},l(a){e=k(a,"DIV",{class:!0});var p=E(e);t=q(p,"\u{1F6A7} Site is under construction. Please send feedback on "),s=k(p,"A",{href:!0});var Q=E(s);l=q(Q,"lampochka.help"),Q.forEach(_),p.forEach(_),o=D(a),n=k(a,"HEADER",{class:!0});var M=E(n);m&&m.l(M),f=D(M),i=k(M,"H5",{class:!0});var U=E(i);u=k(U,"A",{href:!0,class:!0});var W=E(u);S(c.$$.fragment,W),W.forEach(_),U.forEach(_),M.forEach(_),B=D(a),T=k(a,"MAIN",{});var Z=E(T);$&&$.l(Z),Z.forEach(_),C=D(a),g=k(a,"FOOTER",{class:!0});var R=E(g);S(y.$$.fragment,R),G=D(R),S(I.$$.fragment,R),J=q(R,`
		(c) 2021`),R.forEach(_),this.h()},h(){d(s,"href","mailto:lampochka.help@gmail.com"),d(e,"class","construction svelte-o0it02"),d(u,"href",z="/"+r[1]),d(u,"class","svelte-o0it02"),d(i,"class","slogan svelte-o0it02"),d(n,"class","svelte-o0it02"),d(g,"class","svelte-o0it02")},m(a,p){v(a,e,p),h(e,t),h(e,s),h(s,l),v(a,o,p),v(a,n,p),m&&m.m(n,null),h(n,f),h(n,i),h(i,u),F(c,u,null),v(a,B,p),v(a,T,p),$&&$.m(T,null),v(a,C,p),v(a,g,p),F(y,g,null),h(g,G),F(I,g,null),h(g,J),L=!0},p(a,p){a[2]?m?(m.p(a,p),p&4&&w(m,1)):(m=ae(a),m.c(),w(m,1),m.m(n,f)):m&&(_e(),P(m,1,1,()=>{m=null}),pe()),(!L||p&2&&z!==(z="/"+a[1]))&&d(u,"href",z),$&&$.p&&(!L||p&32)&&$e($,K,a,a[5],L?he(K,a[5],p,null):de(a[5]),null)},i(a){L||(w(m),w(c.$$.fragment,a),w($,a),w(y.$$.fragment,a),w(I.$$.fragment,a),L=!0)},o(a){P(m),P(c.$$.fragment,a),P($,a),P(y.$$.fragment,a),P(I.$$.fragment,a),L=!1},d(a){a&&_(e),a&&_(o),a&&_(n),m&&m.d(),H(c),a&&_(B),a&&_(T),$&&$.d(a),a&&_(C),a&&_(g),H(y),H(I)}}}function Ae(r){let e=!1,t=()=>{e=!1},s,l,o,n,f;return fe(r[4]),l=new ie({props:{bundles:te(r[1]),$$slots:{default:[Te]},$$scope:{ctx:r}}}),{c(){N(l.$$.fragment)},l(i){S(l.$$.fragment,i)},m(i,u){F(l,i,u),o=!0,n||(f=ue(window,"scroll",()=>{e=!0,clearTimeout(s),s=setTimeout(t,100),r[4]()}),n=!0)},p(i,[u]){u&1&&!e&&(e=!0,clearTimeout(s),scrollTo(window.pageXOffset,i[0]),s=setTimeout(t,100));const c={};u&2&&(c.bundles=te(i[1])),u&39&&(c.$$scope={dirty:u,ctx:i}),l.$set(c)},i(i){o||(w(l.$$.fragment,i),o=!0)},o(i){P(l.$$.fragment,i),o=!1},d(i){H(l,i),n=!1,f()}}}async function Ye({url:r,params:e,fetch:t}){const s=e.lang||"en";j.set(s),await Ee(t);const l=e.type;we.set(l);const o=await ke(t,s);if(!o.ready)return{status:o.status,error:o.error};delete o.ready,be.set(o);let n=!1;if(e.lesson){const f=/\/?(?:(?<section>[^\/]+)\/[^\/\d\s]*(?<num>\d+))|(?<special>[^\/]+)$/.exec(e.lesson);if(!f)return{status:404,error:new Error(`Could not load ${r.pathname}`)};n=f.groups}return X.set(n),{stuff:{plans:o,currentPlan:l?o[l]:!1,lesson:n}}}function De(r,e,t){let s,l;O(r,j,u=>t(1,s=u)),O(r,X,u=>t(2,l=u));let{$$slots:o={},$$scope:n}=e,f;function i(){t(0,f=window.pageYOffset)}return r.$$set=u=>{"$$scope"in u&&t(5,n=u.$$scope)},[f,s,l,o,i,n]}class qe extends ne{constructor(e){super();re(this,e,De,Ae,oe,{})}}export{qe as default,Ye as load};
